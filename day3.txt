import { Injectable } from '@angular/core';
import { Router } from '@angular/router';
import { RouteGuards } from '../guards/routeguards';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root',
})

export class UsersService {
  URL='http://localhost:3000/users'
  loadStates(): string[] {
    return ['KAR', 'TN', 'DL', 'MH'];
  }
  addUserToDB(data: any) {
   // localStorage.setItem('user', JSON.stringify(data));
   this.http.post(this.URL,data).subscribe((data)=>{
    console.log(data);
    
   })
    this.route.navigateByUrl('/login');
  }
  loadUsers():Observable<any>{
   return this.http.get(this.URL)
     
  }
  userLogin(login: any) {
    this.guard.isAllowed = true;
    this.route.navigateByUrl('/portfolio');
  }
  constructor(private route: Router, private guard: RouteGuards,private http:HttpClient) {}

  userLogout(){
    this.guard.isAllowed = false;
    this.route.navigateByUrl('/login');
  }
}

----------------------

import { Component, OnInit } from '@angular/core';
import { UsersService } from '../../shared/services/users.service';

@Component({
  selector: 'app-company',
  templateUrl: './company.component.html',
  styleUrl: './company.component.css'
})
export class CompanyComponent implements OnInit{

userData:any[]=[]
  constructor(private service:UsersService){}
  ngOnInit(): void {
      this.service.loadUsers().subscribe((data)=>{
        this.userData=data
      })
  }
}



--------------




<p>User Data</p>

<ul>
    <li *ngFor="let user of userData">
        {{user | json}}
    </li>
</ul>
